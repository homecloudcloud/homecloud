"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addKey = void 0;
const messages_1 = require("../messages");
const validators_utils_1 = require("../utils/validators.utils");
function addKey({ defaultValue, scopeToKeys, scopeAlias, keyWithoutScope, scopes, }) {
    if (!keyWithoutScope) {
        return;
    }
    const scopePath = scopes.aliasToScope[scopeAlias];
    const keyWithScope = scopeAlias
        ? `${scopeAlias}.${keyWithoutScope}`
        : keyWithoutScope;
    const keyValue = (0, validators_utils_1.isNil)(defaultValue)
        ? `${messages_1.messages.missingValue} '${keyWithScope}'`
        : defaultValue
            .replace('{{key}}', keyWithScope)
            .replace('{{keyWithoutScope}}', keyWithoutScope)
            .replace('{{scope}}', scopeAlias);
    if (scopePath) {
        if (!scopeToKeys[scopePath]) {
            scopeToKeys[scopePath] = {};
        }
        scopeToKeys[scopePath][keyWithoutScope] = keyValue;
    }
    else {
        scopeToKeys.__global[keyWithoutScope] = keyValue;
    }
}
exports.addKey = addKey;
//# sourceMappingURL=add-key.js.map