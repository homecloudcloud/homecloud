"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildKeys = void 0;
const keys_utils_1 = require("../utils/keys.utils");
const object_utils_1 = require("../utils/object.utils");
const template_1 = require("./template");
const typescript_1 = require("./typescript");
function buildKeys(config) {
    const [template, ts] = [(0, template_1.extractTemplateKeys)(config), (0, typescript_1.extractTSKeys)(config)];
    const scopeToKeys = (0, object_utils_1.mergeDeep)({}, template.scopeToKeys, ts.scopeToKeys);
    const fileCount = template.fileCount + ts.fileCount;
    if (config.unflat) {
        for (const scopeKeys of Object.values(scopeToKeys)) {
            (0, keys_utils_1.checkForProblematicUnflatKeys)(scopeKeys);
        }
    }
    return { scopeToKeys, fileCount };
}
exports.buildKeys = buildKeys;
//# sourceMappingURL=build-keys.js.map