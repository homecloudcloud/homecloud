"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mergeDeep = exports.stringify = void 0;
const config_1 = require("../config");
const validators_utils_1 = require("./validators.utils");
function stringify(val) {
    const { sort } = (0, config_1.getConfig)();
    let value = val;
    if (sort) {
        value = sortKeys(val);
    }
    return JSON.stringify(value, null, 2);
}
exports.stringify = stringify;
function sortKeys(val) {
    return Object.keys(val)
        .sort()
        .reduce((acc, key) => {
        acc[key] = (0, validators_utils_1.isObject)(val[key]) ? sortKeys(val[key]) : val[key];
        return acc;
    }, {});
}
function mergeDeep(target, ...sources) {
    if (!sources.length)
        return target;
    const source = sources.shift();
    if ((0, validators_utils_1.isObject)(target) && (0, validators_utils_1.isObject)(source)) {
        for (const key in source) {
            if ((0, validators_utils_1.isObject)(source[key])) {
                if (!target[key])
                    Object.assign(target, { [key]: {} });
                mergeDeep(target[key], source[key]);
            }
            else {
                Object.assign(target, { [key]: source[key] });
            }
        }
    }
    return mergeDeep(target, ...sources);
}
exports.mergeDeep = mergeDeep;
//# sourceMappingURL=object.utils.js.map